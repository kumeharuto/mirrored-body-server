<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Offering</title>
    <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { background: #000; color: #fff; font-family: 'Shippori Mincho', serif; margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; overflow: hidden; }
        #bg-video { position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -2; opacity: 0.5; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.65); z-index: -1; }
        .box { width: 85%; max-width: 400px; text-align: center; }
        .text-marbling { background-image: url('/static/texture.jpg'); background-size: cover; -webkit-background-clip: text; color: transparent; letter-spacing: 0.1em; }
        .file-label { display: block; width: 100%; height: 280px; border: 1px solid #333; margin: 30px 0; display: flex; align-items: center; justify-content: center; background: rgba(255,255,255,0.03); cursor: pointer; position: relative; }
        #preview { max-width: 100%; max-height: 100%; display: none; }
        .btn { width: 100%; padding: 20px; background: transparent; border: 1px solid #fff; color: #fff; letter-spacing: 0.3em; cursor: pointer; font-size: 1rem; }
        .btn:active { background: #fff; color: #000; }
        #cancel-btn { background: none; border: none; color: #888; margin-top: 25px; cursor: pointer; font-size: 0.8rem; text-decoration: underline; }
    </style>
</head>
<body>
    <video autoplay muted loop playsinline id="bg-video"><source src="/static/DAMN2.m4v" type="video/mp4"></video>
    <div class="overlay"></div>
    <div class="box">
        <h2 class="text-marbling">画像の奉納</h2>
        <p style="font-size:0.85rem; color:#999; line-height:1.8;">記憶や癖を拾い上げるための手がかり</p>
        <label class="file-label">
            <span id="placeholder" style="color:#555;">+ SELECT IMAGE</span>
            <img id="preview">
            <input type="file" id="file" accept="image/*" style="display:none">
        </label>
        <button class="btn" onclick="upload()">奉納する</button>
        <button id="cancel-btn" style="display:none;" onclick="location.reload()">× 取り消す</button>
    </div>

    <script>
        const fileInput = document.getElementById('file');
        fileInput.onchange = (e) => {
            const file = e.target.files[0]; if(!file) return;
            const reader = new FileReader();
            reader.onload = () => {
                const p = document.getElementById('preview'); p.src = reader.result; p.style.display = 'block';
                document.getElementById('placeholder').style.display = 'none';
                document.getElementById('cancel-btn').style.display = 'inline-block';
            };
            reader.readAsDataURL(file);
        };
        async function upload() { alert("奉納中..."); }
    </script>
</body>
</html>